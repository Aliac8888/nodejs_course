<!DOCTYPE html>
<html lang="en">
<%- include("../includes/head.ejs") %>
    <link rel="stylesheet" href="/css/tasks.css">
    </head>

    <body>
        <%- include("../includes/header.ejs") %>
            <main>
                <% if (tasks.length> 0) { %>
                    <div class="task-container">
                        <% tasks.forEach(task=> { %>
                            <div class="task-card">
                                <img src="<%= task.imageUrl ? " /"+ task.imageUrl : 'https://via.placeholder.com/100'
                                    %>" alt="Task Image" class="task-image">
                                <div class="task-content">
                                    <h3>
                                        <%= task.title %>
                                    </h3>
                                    <p>
                                        <%= task.description %>
                                    </p>
                                    <div class="task-actions">
                                        <a href="/tasks/edit/<%= task._id %>" class="edit-button">
                                            Edit
                                        </a>
                                        <input type="hidden" name="_csrf" value="<%= token %>">
                                        <input type="hidden" name="taskId" value="<%= task._id %>">
                                        <button type="button" class="delete-button" onclick="handleDeleteTask(this)">Delete</button>
                                    </div>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                    <% } %>
            </main>
            <%- include("../includes/pagination.ejs") %>
    </body>
    <script src="/scripts/fetch.js"></script>
</html>